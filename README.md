#  Kotlin NDK AuthKey (Assessment Solution)

**Task**: Implement API call with `AuthKey` header, where the value is generated from an encryption mechanism implemented in C via Android NDK + JNI.

## What’s inside
- Kotlin Android app (Retrofit) that calls `GET /posts/1` (jsonplaceholder by default).
- OkHttp Interceptor adds `AuthKey` header each request.
- `AuthKey` is generated by `NativeCrypto.generateAuthKey(payload)` implemented in **C**.
- C side performs **AES-256-CBC** encryption on a dynamic payload (`<path>|<epochSecond>`), PKCS7 padded, then **hex-encodes** the ciphertext. The hex string is used as the header value.
- NDK & CMake integration included.
- Unit test verifies the `AuthKey` header is present.
- ViewBinding UI with a button to trigger the call.

> ⚠️ **Security Note (as required by assessment)**: This is a demo. Keys/IV are hardcoded in native code. In production, store secrets in Android Keystore and derive per-session keys. The AES implementation here is trimmed for brevity and is **not constant-time**.

## Build
1. Open the project in **Android Studio Hedgehog/Koala or newer**.
2. Let it sync Gradle (wrapper not included; Android Studio will handle gradle locally).
3. Run the app on an emulator or device (minSdk 24).
4. Tap **Call API**. You should see a success payload. The request will include `AuthKey` header.

## Change base URL
Type another base URL in the text field if you want to test different endpoints.

## Test
Run unit tests:
```
./gradlew test
```
(or from Android Studio's Test panel).

## Files to check
- `app/src/main/java/com/technonext/ndkauth/NativeCrypto.kt`
- `app/src/main/cpp/native-lib.c`
- `app/src/main/cpp/aes.c` and `aes.h`
- `app/src/main/cpp/CMakeLists.txt`
- `app/src/main/java/com/technonext/ndkauth/Api.kt` (interceptor + retrofit)
- `app/src/test/java/com/technonext/ndkauth/AuthHeaderTest.kt`

## How it works
1. OkHttp `AuthKeyInterceptor` builds a payload from the request path + current epoch.
2. `NativeCrypto.generateAuthKey(payload)` is called through JNI.
3. C code pads the payload (PKCS7), encrypts using AES-256-CBC, then hex encodes the ciphertext.
4. The hex string is returned to Kotlin and attached as `AuthKey` header.

Enjoy. ✅
